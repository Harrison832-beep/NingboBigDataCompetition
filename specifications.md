# Specification

**init_chat_page(request)**: Renders the chat page to the user with logged out status, under which the user won't be able to chat with the chat bot,but prompted with a login request when the user tries to chat.

 

**login_view(request)**: When the user logs in with WeChat account, the user should be authenticated in order to chat with the chat bot. If it is the user's first login, its user information should be saved to the database (could add more routines such as asking for initial configurations (front-end)).

 

User information includes:

- ```userWeChatID: String```
- ```userNickName: String```
- ```botNickName: String```
- ```fontSize: int```
- ```fontColor: String```
- ```fontStyle: String```
- ```backgroundImage: Image```

 

**modify_user_configuration(request)**: Clicking on the "save" button in the configuration page should save the changes to the database and reflect changes to the user.

 

Configurations include:

- ```nickName```
- ```robotName```
- ```fontStyle```
- ```fontSize```
- ```fontColor```

 

**save_chat_to_history(request)**: Every message sent by user or generated by bot will be saved to database.



**search_chat_history(request)**: All chat history at a particular date will be rendered for the user when the user does the search.



**clear_chat_history(request)**: Delete all chat history for a particular user.



**generate_response(request)**: Response will be generated according to the user input, it will call ```is_database_query()``` to check if it is a database query, and then uses this value to get the corresponding ```GenerateResponse``` object (either **database response** or **NLP response**) through a ```GenerateResponseFactory```, then return the response.

 

**is_database_query(user_input)**: Tells if the user input is a database query.



